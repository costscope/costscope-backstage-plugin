## API Report File for "@costscope/backstage-plugin"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

/// <reference types="react" />

import { ApiRef } from '@backstage/core-plugin-api';
import { JSX as JSX_2 } from 'react';
import { MutableRefObject } from 'react';
import { QueryClient } from '@tanstack/react-query';
import { default as React_2 } from 'react';
import * as React_3 from 'react';
import { SvgIconProps } from '@mui/material/SvgIcon';
import { UseQueryResult } from '@tanstack/react-query';

// @public
export type ActionItem = (paths['/alerts'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer A> ? A : {
    id: string;
    severity: 'info' | 'warn' | 'critical';
    message: string;
};

// @public
export type BreakdownRow = (paths['/breakdown'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer B> ? B : {
    dim: string;
    cost: number;
    deltaPct: number;
};

// @public
export function buildPath(endpoint: string, params: Record<string, string | undefined>): string;

// @public (undocumented)
export type CacheEvent = {
    type: 'stale-serve';
    path: string;
    ts: number;
} | {
    type: 'swr-revalidate-start';
    path: string;
    ts: number;
} | {
    type: 'swr-revalidate-success';
    path: string;
    ts: number;
} | {
    type: 'swr-revalidate-error';
    path: string;
    ts: number;
    error: any;
} | {
    type: 'swr-hard-expired';
    path: string;
    ts: number;
};

// @public (undocumented)
export interface components {
    // (undocumented)
    headers: never;
    // (undocumented)
    parameters: never;
    // (undocumented)
    pathItems: never;
    // (undocumented)
    requestBodies: never;
    // (undocumented)
    responses: never;
    // (undocumented)
    schemas: {
        Provider: {
            id: string;
            displayName: string;
            status: string;
            services?: number;
            lastUpdated?: string;
        };
        Dataset: {
            id: string;
            provider: string;
            project: string;
            status: string;
            records: number;
            periodStart: string;
            periodEnd: string;
            lastIngestedAt?: string;
        };
        CostSummary: {
            period: string;
            project: string;
            totalCost: number;
            previousTotalCost: number;
            deltaPct: number;
            currency: string;
        };
        OverviewItem: {
            date: string;
            cost: number;
        };
        BreakdownRow: {
            dim: string;
            cost: number;
            deltaPct: number;
        };
        ActionItem: {
            id: string;
            severity: "info" | "warn" | "critical";
            message: string;
        };
    };
}

// @public (undocumented)
export const CostDriversCard: ({ period, project, dimension, limit }: CostDriversCardProps) => React_2.JSX.Element;

// @public (undocumented)
export interface CostDriversCardProps {
    // (undocumented)
    dimension?: string;
    // (undocumented)
    limit?: number;
    // (undocumented)
    period?: string;
    // (undocumented)
    project?: string;
}

// @public (undocumented)
export const costscope: any;

// @public
export interface CostscopeApi {
    // (undocumented)
    getActionItems(options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<ActionItem[]>;
    // (undocumented)
    getBreakdown(group: string, period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<BreakdownRow[]>;
    // (undocumented)
    getDatasets(options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<DatasetMeta[]>;
    // (undocumented)
    getOverview(period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<Overview[]>;
    // (undocumented)
    getProviders(options?: {
        refresh?: boolean;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<ProviderInfo[]>;
    // (undocumented)
    getSummary(period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<Summary>;
    // (undocumented)
    health(options?: {
        signal?: AbortSignal;
    }): Promise<Healthz>;
    // (undocumented)
    invalidateCache(key?: string): void;
    // (undocumented)
    prefetchAll(params: {
        period?: string;
        project?: string;
        signal?: AbortSignal;
        validate?: boolean;
    }): Promise<{
        overview: Overview[];
        breakdown: BreakdownRow[];
        alerts: ActionItem[];
        summary?: Summary;
        providers?: ProviderInfo[];
        datasets?: DatasetMeta[];
        correlationId: string;
        durationMs: number;
    }>;
    // (undocumented)
    searchDatasets(params: DatasetSearchParams & {
        signal?: AbortSignal;
        refresh?: boolean;
        validate?: boolean;
    }): Promise<DatasetSearchRow[]>;
    // (undocumented)
    subscribeCacheEvents?(listener: (e: CacheEvent) => void): () => void;
}

// @public
export const costscopeApiRef: ApiRef<CostscopeApi>;

// @public (undocumented)
export class CostscopeClient {
    constructor(opts: CostscopeClientOptions);
    ['cfg'](): {
        timeoutMs: number;
        cacheTtlMs: number;
        retry: {
            maxAttempts: number;
            retryOn: number[];
            backoffBaseMs: number;
            jitterFactor?: number | undefined;
        };
        swr: {
            enabled: boolean;
            staleFactor: number;
        };
    };
    // (undocumented)
    getActionItems(options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<any[]>;
    // (undocumented)
    getBreakdown(group: string, period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<any[]>;
    // (undocumented)
    getDatasets(options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<DatasetMeta[]>;
    // (undocumented)
    getOverview(period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<any[]>;
    // (undocumented)
    getProviders(options?: {
        refresh?: boolean;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<ProviderInfo[]>;
    // (undocumented)
    getSummary(period: string, options?: {
        refresh?: boolean;
        project?: string;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<any>;
    // (undocumented)
    health(options?: {
        signal?: AbortSignal;
        correlationId?: string;
    }): Promise<Healthz>;
    ['internalCacheEnabled'](): boolean;
    // (undocumented)
    invalidate(path?: string): void;
    invalidateCache(key?: string): void;
    ['isCritical'](err: any): boolean;
    // (undocumented)
    prefetchAll(params: {
        period?: string;
        project?: string;
        signal?: AbortSignal;
    }): Promise<{
        overview: Overview[];
        breakdown: BreakdownRow[];
        alerts: ActionItem[];
        summary?: any;
        providers?: ProviderInfo[];
        datasets?: DatasetMeta[];
        correlationId: string;
        durationMs: number;
    }>;
    // (undocumented)
    searchDatasets(params: DatasetSearchParams & {
        refresh?: boolean;
        signal?: AbortSignal;
        correlationId?: string;
        validate?: boolean;
    }): Promise<DatasetSearchRow[]>;
    // (undocumented)
    subscribeCacheEvents(listener: any): any;
}

// @public (undocumented)
export interface CostscopeClientOptions {
    // (undocumented)
    alertApi?: any;
    // (undocumented)
    cacheTtlMs?: number;
    // (undocumented)
    configApi?: any;
    // (undocumented)
    critical?: {
        statuses?: number[];
        codes?: string[];
    };
    // (undocumented)
    discoveryApi: any;
    // (undocumented)
    enableInternalCache?: boolean;
    // (undocumented)
    errorApi?: any;
    // (undocumented)
    fetchApi: any;
    // (undocumented)
    identityApi: any;
    // (undocumented)
    maxEntries?: number;
    // (undocumented)
    retry?: {
        maxAttempts?: number;
        retryOn?: number[];
        backoffBaseMs?: number;
        jitterFactor?: number;
    };
    // (undocumented)
    serviceId?: string;
    // (undocumented)
    silent?: boolean;
    // (undocumented)
    swr?: {
        enabled?: boolean;
        staleFactor?: number;
    };
    // (undocumented)
    telemetry?: (_event: any) => void;
    // (undocumented)
    timeoutMs?: number;
}

// @public (undocumented)
export interface CostscopeError extends Error {
    // (undocumented)
    __costscope: true;
    // (undocumented)
    attempt: number;
    // (undocumented)
    cause?: any;
    // (undocumented)
    code: CostscopeErrorCode;
    // (undocumented)
    correlationId: string;
    // (undocumented)
    message: string;
    // (undocumented)
    path?: string;
    // (undocumented)
    schemaHash?: string;
    // (undocumented)
    status?: number;
}

// @public (undocumented)
export type CostscopeErrorCode = typeof CostscopeErrorCodes[keyof typeof CostscopeErrorCodes];

// @public (undocumented)
export const CostscopeErrorCodes: {
    readonly TIMEOUT: "TIMEOUT";
    readonly HTTP_ERROR: "HTTP_ERROR";
    readonly NETWORK_ERROR: "NETWORK_ERROR";
    readonly VALIDATION_ERROR: "VALIDATION_ERROR";
    readonly UNKNOWN: "UNKNOWN";
};

// @public (undocumented)
export const CostscopePage: () => JSX_2.Element;

// @public
export type CostscopePrefetchManifest = {
    version: 1;
    ts: number;
    correlationId?: string;
    serviceId?: string;
    params?: {
        period?: string;
        project?: string;
    };
    queries: Array<{
        key: readonly unknown[];
        endpoint: string;
        priority?: 0 | 1 | 2;
        staleTimeMs?: number;
        data?: unknown;
        meta?: {
            itemCount?: number;
            bytes?: number;
        };
    }>;
    linkHints?: Array<{
        rel: 'preload' | 'prefetch';
        href: string;
        as?: 'fetch';
        crossOrigin?: 'use-credentials' | 'anonymous';
    }>;
};

// @public (undocumented)
export function createCostscopeClient(configApi: any, overrides?: Omit<CostscopeClientOptions, 'configApi'>): CostscopeClient;

// @public
export const CriticalProfiles: {
    readonly defaultHeuristic: undefined;
    readonly transientInfra: {
        readonly statuses: readonly [502, 503, 504];
        readonly codes: CostscopeErrorCode[];
    };
    readonly minimal: {
        readonly statuses: number[];
        readonly codes: CostscopeErrorCode[];
    };
};

// @public (undocumented)
export const CURRENCY = "USD";

// @public
export type DatasetMeta = (paths['/datasets'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer D> ? D : {
    id: string;
    provider: string;
    periodStart: string;
    periodEnd: string;
    records: number;
    status: string;
};

// @public (undocumented)
export const DatasetSearchPageLazy: React_2.LazyExoticComponent<() => React_2.JSX.Element>;

// @public
export interface DatasetSearchParams {
    // (undocumented)
    from?: string;
    // (undocumented)
    limit?: number;
    // (undocumented)
    maxRecords?: number;
    // (undocumented)
    minRecords?: number;
    // (undocumented)
    project?: string;
    // (undocumented)
    provider?: string;
    // (undocumented)
    status?: string;
    // (undocumented)
    to?: string;
}

// @public
export type DatasetSearchRow = ((paths & Record<string, any>)['/datasets/search'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer S> ? S : DatasetMeta;

// @public (undocumented)
export const DEFAULT_BREAKDOWN_DIMENSION = "ServiceCategory";

// @public (undocumented)
export const DEFAULT_PERIOD = "P30D";

// @public (undocumented)
export const DEFAULT_SERVICE_ID = "costscope";

// @public (undocumented)
export interface FormattingContextValue {
    // (undocumented)
    currency: string;
    // (undocumented)
    formatCurrency: (value: number | null | undefined, opts?: {
        maximumFractionDigits?: number;
    }) => string;
    // (undocumented)
    formatCurrencyCompact: (value: number | null | undefined, opts?: {
        maximumFractionDigits?: number;
    }) => string;
    // (undocumented)
    formatPercent: (value: number | null | undefined, opts?: {
        fractionDigits?: number;
    }) => string;
    // (undocumented)
    locale: string;
}

// @public (undocumented)
export const FormattingProvider: ({ children, currency: overrideCurrency, locale: overrideLocale, configApi: overrideConfigApi }: {
    children: React_2.ReactNode;
    currency?: string;
    locale?: string;
    configApi?: {
        getOptionalString(path: string): string | undefined;
    };
}) => React_2.JSX.Element;

// @public (undocumented)
export const GitHubSmall: (props: SvgIconProps) => React_3.JSX.Element;

// @public
export type Healthz = (paths & Record<string, any>)['/healthz'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : {
    status: string;
};

// @public (undocumented)
export function hydrateFromManifest(queryClient: QueryClient, doc?: Document): CostscopePrefetchManifest | undefined;

// @public (undocumented)
export interface I18nContextValue {
    // (undocumented)
    locale: string;
    // (undocumented)
    messages: Record<string, string>;
    // (undocumented)
    t: (key: string, vars?: Record<string, any>) => string;
}

// @public (undocumented)
export const I18nProvider: ({ locale: forcedLocale, messages, children, configApi }: {
    locale?: string;
    messages?: Record<string, string>;
    children: React_2.ReactNode;
    configApi?: {
        getOptionalString(key: string): string | undefined;
    };
}) => React_2.JSX.Element;

// @public (undocumented)
export function isCostscopeError(e: any): e is CostscopeError;

// @public
export type Overview = (paths['/costs/daily'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer O> ? O : {
    date: string;
    cost: number;
};

// @public (undocumented)
export interface paths {
    // (undocumented)
    "/alerts": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: never;
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["ActionItem"][];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
    // (undocumented)
    "/breakdown": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: {
                    by?: string;
                    period?: string;
                };
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["BreakdownRow"][];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
    // (undocumented)
    "/costs/daily": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: {
                    period?: string;
                };
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["OverviewItem"][];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
    // (undocumented)
    "/costs/summary": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: {
                    period?: string;
                    project?: string;
                };
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["CostSummary"];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
    // (undocumented)
    "/datasets": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: {
                    project?: string;
                };
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["Dataset"][];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
    // (undocumented)
    "/providers": {
        parameters: {
            query?: never;
            header?: never;
            path?: never;
            cookie?: never;
        };
        get: {
            parameters: {
                query?: never;
                header?: never;
                path?: never;
                cookie?: never;
            };
            requestBody?: never;
            responses: {
                200: {
                    headers: {
                        [name: string]: unknown;
                    };
                    content: {
                        "application/json": components["schemas"]["Provider"][];
                    };
                };
            };
        };
        put?: never;
        post?: never;
        delete?: never;
        options?: never;
        head?: never;
        patch?: never;
        trace?: never;
    };
}

// @public (undocumented)
export const PLUGIN_VERSION: "0.1.1";

// @public (undocumented)
export const PROJECT_ANNOTATION = "costscope.io/project";

// @public (undocumented)
export const PROJECT_QUERY_PARAM = "project";

// @public
export type ProviderInfo = (paths['/providers'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown) extends Array<infer P> ? P : {
    id: string;
    name: string;
    status?: string;
};

// @public (undocumented)
export function readManifestFromDocument(doc?: Document): CostscopePrefetchManifest | undefined;

// @public (undocumented)
export function resolveServiceId(configApi?: {
    getOptionalString(path: string): string | undefined;
}): string;

// @public
export type Summary = paths['/costs/summary'] extends {
    get: {
        responses: {
            200: {
                content: {
                    'application/json': infer R;
                };
            };
        };
    };
} ? R : unknown;

// @public (undocumented)
export function useCacheEvents(listener: (e: CacheEvent) => void): void;

// @public
export function useDatasets(params?: {
    project?: string;
    limit?: number;
}): UseQueryResult<any[], Error>;

// @public
export function useDatasetSearch(params: UseDatasetsSearchParams): UseQueryResult<    {
id: string;
provider: string;
project: string;
status: string;
records: number;
periodStart: string;
periodEnd: string;
lastIngestedAt?: string | undefined;
}[], Error>;

// @public
export function useDatasetsSearch(params: UseDatasetsSearchParams): UseQueryResult<    {
id: string;
provider: string;
project: string;
status: string;
records: number;
periodStart: string;
periodEnd: string;
lastIngestedAt?: string | undefined;
}[], Error>;

// @public (undocumented)
export interface UseDatasetsSearchParams {
    enabled?: boolean;
    // (undocumented)
    from?: string;
    // (undocumented)
    limit?: number;
    // (undocumented)
    maxRecords?: number;
    // (undocumented)
    minRecords?: number;
    // (undocumented)
    project?: string;
    // (undocumented)
    provider?: string;
    // (undocumented)
    status?: string;
    // (undocumented)
    to?: string;
}

// @public (undocumented)
export function useFormatting(): FormattingContextValue;

// @public (undocumented)
export const useI18n: () => I18nContextValue;

// @public (undocumented)
export function usePrefetchedCostscopeData(opts: {
    period?: string;
    project?: string;
    enabled?: boolean;
    freshWithinMs?: number;
}): {
    readonly overview: {
        date: string;
        cost: number;
    }[] | undefined;
    readonly breakdown: {
        dim: string;
        cost: number;
        deltaPct: number;
    }[] | undefined;
    readonly alerts: {
        id: string;
        severity: "info" | "warn" | "critical";
        message: string;
    }[] | undefined;
    readonly correlationId: string | undefined;
    readonly durationMs: number | undefined;
    readonly isLoading: boolean;
    readonly error: any;
    readonly refresh: () => Promise<void>;
};

// @public (undocumented)
export function usePrefetchOnVisibility(cb: () => Promise<any> | any, opts?: {
    threshold?: number;
    rootMargin?: string;
    once?: boolean;
}): {
    readonly ref: MutableRefObject<HTMLElement | null>;
    readonly hasPrefetched: boolean;
};

// @public
export function useProgressiveHydration(manifest?: CostscopePrefetchManifest): void;

// @public (undocumented)
export function useProjectAnnotation(): {
    project?: string;
    hasProject: boolean;
};

// @public
export function useProviders(): UseQueryResult<    {
id: string;
displayName: string;
status: string;
services?: number | undefined;
lastUpdated?: string | undefined;
}[], Error>;

// @public (undocumented)
export function useRetryTelemetry(): void;

// @public
export function useTopBreakdown({ dimension, period, limit, project }: UseTopBreakdownParams): UseQueryResult<    {
dim: string;
cost: number;
deltaPct: number;
}[], Error>;

// @public (undocumented)
export interface UseTopBreakdownParams {
    dimension: string;
    limit?: number;
    period: string;
    project?: string;
}

// @public
export function withProjectParam<T extends Record<string, string | undefined>>(params: T, project?: string): T & {
    [k: string]: string | undefined;
};

// @public (undocumented)
export const WorkspacePremiumSmall: (props: SvgIconProps) => React_3.JSX.Element;

```
